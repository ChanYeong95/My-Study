# API Gateway

MSA는 시스템을 독립적인 서비스로 분리하여 확장성, 재사용성, 관리 용이성을 향상시킨다.  
하지만 서비스 간 통신, 데이터 일관성 유지, 인증 및 보안, 모니터링 등 복잡성이 발생한다.

이 때, 복잡성 관리에 도움을 주는 **API Gateway**를 활용할 수 있다.  
API Gateway는 클라이언트와 마이크로서비스 간의 모든 요청을 관리하고, 효율적인 통신 및 보안을 지원하는 중요한 역할을 한다.

## 1. 라우팅
- 클라이언트는 단일 API 엔드포인트와 상호작용하고, API 게이트웨이가 요청을 적절한 서비스로 라우팅한다.
- 이를 통해 클라이언트는 다수의 마이크로서비스를 직접 호출할 필요 없이 간소화된 인터페이스를 사용할 수 있다.
- API Gateway는 일반적으로 **역방향 프록시(reverse proxy)** 방식으로 구현된다.
 
## 2. 데이터 변환
- 클라이언트와 각각의 마이크로서비스 간의 데이터 포맷이나 통신 프로토콜 차이를 해결한다.
- 요청 및 응답 변환뿐 아니라, 여러 서비스의 데이터를 통합하여 단일 응답으로 반환하는 **API 조합(Aggregation)** 기능도 지원한다.

## 3. 인증 및 권한 부여
- 모든 요청은 API 게이트웨이를 통과하기 때문에 게이트웨이에서 사용자 인증 및 권한 검사를 중앙 집중식으로 처리할 수 있다.
- 각각의 마이크로서비스가 이러한 작업을 따로 처리할 필요 없이 보안을 강화할 수 있다.

## 4. 로드 밸런싱 및 장애 처리
- API Gateway는 클라이언트 요청을 여러 인스턴스의 마이크로서비스로 분산시킨다. 
- **Circuit Breaker**를 사용하여 장애 발생 시 서비스 간 연쇄 오류를 방지하거나, 다른 서비스로 요청을 리다이렉션하여 가용성을 유지한다.
- **Rate Limiting**으로 과도한 요청을 제어하여 시스템 안정성을 높일 수 있다.